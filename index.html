<!DOCTYPE html>
<html>
<head>
    <title>AR Video with AR.js</title>
    <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
    <script src="https://cdn.rawgit.com/jeromeetienne/ar.js/2.1.8/aframe/build/aframe-ar.min.js"></script>
    <style>
        body { margin: 0; overflow: hidden; }
        #start-btn {
            position: fixed;
            top: 50%; left: 50%;
            transform: translate(-50%, -50%);
            background: #111;
            color: white;
            padding: 1em 2em;
            font-size: 18px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            z-index: 20;
        }
    </style>
</head>
<body>

<button id="start-btn">شروع تجربه AR ▶️
</button>

<a-scene embedded arjs='sourceType: webcam; debugUIEnabled: false;'>
    <a-assets>
        <video id="ar-video" loop muted playsinline
               src="https://interactive-examples.mdn.mozilla.net/media/cc0-videos/flower.mp4">
        </video>
    </a-assets>

    <a-marker id="myMarker" type="pattern" url="pattern-target.patt">
        <a-video
                src="#ar-video"
                width="1"
                height="1"
                position="0 0 0"
                rotation="-90 0 0">
        </a-video>
    </a-marker>

    <a-entity camera></a-entity>
</a-scene>

<script>
    const video = document.getElementById('ar-video');
    const startBtn = document.getElementById('start-btn');

    startBtn.addEventListener('click', () => {
        video.play().then(() => {
            startBtn.style.display = 'none';
        }).catch(err => {
            alert("خطا در پخش ویدیو: " + err);
        });
    });

</script>
<script>
    const marker = document.querySelector("#myMarker");
    const statusBox = document.getElementById("status");

    marker.addEventListener("markerFound", () => {
        statusBox.innerText = "مارکر شناسایی شد ✅";
        statusBox.style.display = "block";
    });

    marker.addEventListener("markerLost", () => {
        statusBox.innerText = "مارکر شناسایی نشد ❌";
        setTimeout(() => statusBox.style.display = "none", 1000);
    });
</script>

</body>
</html>